<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–í—Ö–æ–¥/–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</title>
<style>
body{margin:0;padding:20px;font-family:'Orbitron',sans-serif;background:#0b0c10;color:#00f0ff;display:flex;flex-direction:column;align-items:center;}
h1{font-size:2.5em;text-shadow:0 0 10px #00f0ff;margin-bottom:25px;}
.card{background:rgba(0,0,0,0.55);padding:25px;border-radius:12px;border:1px solid rgba(0,255,255,0.2);box-shadow:0 2px 15px rgba(0,255,255,0.3);width:320px;}
input{width:100%;padding:10px;margin:10px 0;border-radius:6px;border:none;background:#0b0c10;color:#00f0ff;outline:1px solid #00f0ff;}
.button{width:100%;padding:12px;border:none;border-radius:8px;background:#00a0ff;color:#000;font-weight:bold;cursor:pointer;transition:0.3s;}
.button:hover{background:#00f0ff;box-shadow:0 0 10px #00f0ff;color:#000;}
.error{color:#ff5555;margin-top:10px;text-align:center;}
</style>
</head>
<body>
<h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h1>
<div class="card">
<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å">
<button class="button" id="loginBtn">–í–æ–π—Ç–∏</button>
<button class="button" id="registerBtn">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
<div class="error" id="err"></div>
</div>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js";
import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";

// üîπ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ä–∞–±–æ—á–∏–π –∫–æ–Ω—Ñ–∏–≥
const firebaseConfig = {
  apiKey: "AIzaSyB7QbVxGHR7Qm8o8Wzl_wxsCpzMUdS5rws",
  authDomain: "gdboard-add4a.firebaseapp.com",
  projectId: "gdboard-add4a",
  storageBucket: "gdboard-add4a.appspot.com",
  messagingSenderId: "883125028740",
  appId: "1:883125028740:web:c504de4139943b8606bfd1"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const emailEl=document.getElementById('email'), passEl=document.getElementById('password'), errEl=document.getElementById('err');
document.getElementById('loginBtn').addEventListener('click', async ()=>{
  try{
    const cred = await signInWithEmailAndPassword(auth,emailEl.value,passEl.value);
    window.location.href='main.html';
  } catch(e){ errEl.textContent=e.message; }
});
document.getElementById('registerBtn').addEventListener('click', async ()=>{
  try{
    const cred = await createUserWithEmailAndPassword(auth,emailEl.value,passEl.value);
    await setDoc(doc(db,'users',cred.user.uid),{
      nick:'',
      points:0,
      situation:'not requested',
      role:'player'
    });
    window.location.href='nick.html';
  } catch(e){ errEl.textContent=e.message; }
});
</script>
</body>
</html>
